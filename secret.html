<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
<title>TRANSMISSION</title>

<style>
:root{
  --violet:#8a2eff;
  --bg:#000;
  --fg:#fff;
}

*{box-sizing:border-box}
html,body{height:100%}

body{
  margin:0;
  background:var(--bg);
  color:var(--fg);
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
  overflow:hidden;
  position:relative;
}

/* kill link underlines */
a{ text-decoration:none; color:#fff; }

/* TOP BRAND LINK */
.brand{
  position:fixed;
  top:14px;
  left:14px;
  z-index:12;
  font-size:11px;
  letter-spacing:.34em;
  text-transform:uppercase;
  color:#fff;
  text-decoration:none;
  opacity:.72;
  text-shadow:0 0 18px rgba(138,46,255,.25);
}
.brand:hover{opacity:1}

/* VIOLET FOG */
body::before{
  content:"";
  position:fixed;
  inset:-25%;
  pointer-events:none;
  z-index:0;
  background:
    radial-gradient(circle at 18% 20%, rgba(138,46,255,.26), transparent 58%),
    radial-gradient(circle at 78% 32%, rgba(138,46,255,.18), transparent 64%),
    radial-gradient(circle at 48% 88%, rgba(138,46,255,.14), transparent 70%),
    radial-gradient(circle at 60% 60%, rgba(255,255,255,.04), transparent 72%);
  mix-blend-mode:screen;
  filter:blur(38px) saturate(1.25);
  animation:fog 18s ease-in-out infinite;
}
@keyframes fog{
  0%,100%{transform:translate(0,0) scale(1)}
  50%{transform:translate(-2.5%,3.5%) scale(1.02)}
}

/* CRT SCANLINES */
.scanlines{
  position:fixed;
  inset:0;
  pointer-events:none;
  z-index:6;
  background:
    repeating-linear-gradient(
      to bottom,
      rgba(255,255,255,.06) 0px,
      rgba(255,255,255,.06) 1px,
      rgba(0,0,0,0) 3px,
      rgba(0,0,0,0) 6px
    );
  opacity:.08;
  mix-blend-mode:overlay;
}

/* SUBTLE CHROMA SPLIT */
.chroma{
  position:fixed;
  inset:0;
  pointer-events:none;
  z-index:5;
  filter:contrast(1.08) saturate(1.05);
  animation:chroma 6s ease-in-out infinite;
}
@keyframes chroma{
  0%,100%{transform:translate(0,0)}
  50%{transform:translate(.6px,-.4px)}
}

/* CENTER WRAP */
.wrap{
  position:relative;
  z-index:2;
  height:100%;
  display:flex;
  align-items:center;
  justify-content:center;
  text-align:center;
  padding:24px;
}

.title{
  font-size:clamp(20px,4.2vw,52px);
  letter-spacing:.46em;
  text-transform:uppercase;
  text-shadow:
    0 0 18px rgba(138,46,255,.40),
    0 0 60px rgba(138,46,255,.18);
  user-select:none;
}

.sub{
  margin-top:10px;
  font-size:12px;
  letter-spacing:.28em;
  text-transform:uppercase;
  opacity:.6;
}

.timer{
  margin-top:26px;
  font-size:clamp(18px,3vw,40px);
  letter-spacing:.28em;
  text-transform:uppercase;
  text-shadow:0 0 18px rgba(138,46,255,.25);
}

/* SCRAMBLE LOOK */
.timer .ghost{
  opacity:.35;
  filter:blur(.4px);
}

/* “Tour” block */
.tour{
  margin-top:26px;
  display:inline-block;
  padding:14px 16px;
  border-radius:18px;
  background:rgba(255,255,255,.03);
  text-align:left;
  max-width:560px;
}
.tourTitle{
  font-size:11px;
  letter-spacing:.34em;
  text-transform:uppercase;
  opacity:.75;
}
.tourLine{
  margin-top:8px;
  font-size:12px;
  letter-spacing:.18em;
  opacity:.62;
  line-height:1.6;
}
.tourActions{
  margin-top:12px;
  display:flex;
  gap:10px;
  flex-wrap:wrap;
}
.pill{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  padding:10px 14px;
  border-radius:999px;
  letter-spacing:.22em;
  font-size:11px;
  text-transform:uppercase;
  border:0;
  color:#fff;
  background:rgba(255,255,255,.06);
  text-decoration:none;
}
.pill.v{ background: rgba(138,46,255,.14); }
.pill:hover{filter:brightness(1.06)}

/* WHISPER MESSAGE */
.whisper{
  margin-top:14px;
  font-size:11px;
  letter-spacing:.32em;
  text-transform:uppercase;
  opacity:0;
  transition:opacity .12s linear;
}
.whisper.on{ opacity:.55; }

/* SCREEN TEAR BARS */
.tear{
  position:fixed;
  left:-10%;
  width:120%;
  height:22px;
  background:linear-gradient(90deg,
    transparent,
    rgba(255,255,255,.12),
    rgba(138,46,255,.22),
    rgba(255,255,255,.10),
    transparent
  );
  opacity:0;
  z-index:8;
  mix-blend-mode:screen;
  filter:blur(.2px);
  transform:skewX(-18deg);
}

/* FLASH */
.flash{
  position:fixed;
  inset:0;
  background:#fff;
  opacity:0;
  pointer-events:none;
  z-index:10;
}
.flash.active{ animation:flash .14s; }
@keyframes flash{
  0%{opacity:0}
  50%{opacity:.35}
  100%{opacity:0}
}

/* CURSOR TRAIL */
.trail{
  position:fixed;
  width:10px;height:10px;
  border-radius:50%;
  background:rgba(138,46,255,.9);
  box-shadow:0 0 20px rgba(138,46,255,.4);
  pointer-events:none;
  z-index:9;
  opacity:.0;
  transform:translate(-50%,-50%);
}

/* tiny hint (not a gate) */
.hush{
  position:fixed;
  left:50%;
  bottom:74px;
  transform:translateX(-50%);
  z-index:11;
  font-size:10px;
  letter-spacing:.30em;
  text-transform:uppercase;
  opacity:.0;
  transition:opacity .4s;
  pointer-events:none;
}
.hush.on{opacity:.55}

/* NEW: bottom 3 buttons */
.bottomNav{
  position:fixed;
  left:50%;
  bottom:18px;
  transform:translateX(-50%);
  z-index:12;
  display:flex;
  gap:10px;
  flex-wrap:wrap;
  justify-content:center;
}
.bbtn{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  padding:12px 16px;
  border-radius:999px;
  letter-spacing:.22em;
  font-size:11px;
  text-transform:uppercase;
  border:0;
  color:#fff;
  background:rgba(255,255,255,.06);
  cursor:pointer;
  user-select:none;
}
.bbtn:hover{filter:brightness(1.06)}
.bbtn.v{ background: rgba(138,46,255,.14); }

@media (prefers-reduced-motion: reduce){
  body::before,.chroma{animation:none!important}
}
</style>
</head>

<body>
<a class="brand" href="index.html">CLAWBOI</a>

<div class="scanlines"></div>
<div class="chroma"></div>
<div class="flash" id="flash"></div>
<div class="tear" id="tear"></div>
<div class="trail" id="trail"></div>
<div class="hush" id="hush">TAP ANYWHERE TO WAKE THE AUDIO</div>

<div class="wrap">
  <div>
    <div class="title" id="title">TRANSMISSION INCOMING</div>
    <div class="sub" id="sub">SIGNAL: UNSTABLE · DO NOT LOOK AWAY</div>
    <div class="timer" id="timer">LOADING SIGNAL...</div>

    <div class="tour">
      <div class="tourTitle">TOUR</div>
      <div class="tourLine">
        NO DATES SCHEDULED. THE SIGNAL HASN’T CHOSEN A ROOM YET.<br>
        WHEN IT DOES, YOU’LL HEAR IT FIRST.
      </div>
      <div class="tourActions">
        <a class="pill v" href="follow.html">GET ALERTS</a>
        <a class="pill" href="listen.html">LISTEN</a>
        <a class="pill" href="shop.html">SHOP</a>
      </div>
    </div>

    <div class="whisper" id="whisper">YOU HEAR IT TOO</div>
  </div>
</div>

<!-- NEW: only 3 buttons at bottom -->
<div class="bottomNav">
  <a class="bbtn v" href="vault.html">VAULT</a>
  <a class="bbtn" href="games.html">GAMES</a>
  <a class="bbtn" href="dream.html">DREAM</a>
</div>

<script>
/* ===== COUNTDOWN: resets to 14 days, looping, anchored to Feb 19 2026 9:30 AM Los Angeles time ===== */
const baseLA = new Date("2026-02-19T09:30:00-08:00");
const PERIOD_MS = 14 * 24 * 60 * 60 * 1000;

/* ===== UI ===== */
const timerEl = document.getElementById("timer");
const flash = document.getElementById("flash");
const tear  = document.getElementById("tear");
const whisper = document.getElementById("whisper");
const trail = document.getElementById("trail");
const hush = document.getElementById("hush");

let audioOn = false;
let ctx = null;

/* ===== HELPERS ===== */
const pad2 = (n)=> String(n).padStart(2,"0");
const rand = (a,b)=> a + Math.random()*(b-a);

function formatCountdown(ms){
  const d = Math.floor(ms/86400000);
  const h = Math.floor(ms%86400000/3600000);
  const m = Math.floor(ms%3600000/60000);
  const s = Math.floor(ms%60000/1000);
  return `${d}D ${pad2(h)}H ${pad2(m)}M ${pad2(s)}S`;
}

const CHARS = "░▒▓█@#%&*+=-?/\\<>[]{}01ZXCVBNM";
function scrambleString(str, intensity=0.35){
  let out = "";
  for(let i=0;i<str.length;i++){
    const ch = str[i];
    if(ch === " ") { out += " "; continue; }
    out += (Math.random() < intensity) ? CHARS[Math.floor(Math.random()*CHARS.length)] : ch;
  }
  return out;
}

function hitGlitch(power=1){
  flash.classList.add("active");
  setTimeout(()=>flash.classList.remove("active"),120);

  const y = Math.floor(rand(10, 90));
  tear.style.top = y + "vh";
  tear.style.opacity = (0.10 + power*0.12).toFixed(2);
  tear.style.height = Math.floor(14 + power*18) + "px";
  tear.style.filter = `blur(${(0.1 + power*0.35).toFixed(2)}px)`;
  setTimeout(()=>{ tear.style.opacity = 0; }, 140);
}

/* ===== AUDIO GLITCH (unlock on first tap) ===== */
function ensureAudio(){
  if(ctx) return;
  ctx = new (window.AudioContext || window.webkitAudioContext)();
}

function glitchPop(){
  if(!audioOn || !ctx) return;
  const o = ctx.createOscillator();
  const g = ctx.createGain();
  o.type = "square";
  o.frequency.value = 40 + Math.random()*520;
  g.gain.value = 0.0001;
  o.connect(g);
  g.connect(ctx.destination);
  const t = ctx.currentTime;
  g.gain.setValueAtTime(0.0001, t);
  g.gain.exponentialRampToValueAtTime(0.06, t + 0.01);
  g.gain.exponentialRampToValueAtTime(0.0001, t + 0.09);
  o.start(t);
  o.stop(t + 0.10);
}

function glitchSweep(){
  if(!audioOn || !ctx) return;
  const o = ctx.createOscillator();
  const g = ctx.createGain();
  o.type = "sawtooth";
  o.frequency.setValueAtTime(180, ctx.currentTime);
  o.frequency.exponentialRampToValueAtTime(40, ctx.currentTime + 0.12);
  g.gain.value = 0.045;
  o.connect(g);
  g.connect(ctx.destination);
  o.start();
  setTimeout(()=>o.stop(), 140);
}

/* ===== COUNTDOWN LOOP (14-day repeating window) ===== */
function msToNextDrop(nowMs){
  const base = baseLA.getTime();
  if(nowMs < base) return base - nowMs;
  const elapsed = nowMs - base;
  const into = elapsed % PERIOD_MS;
  const remain = PERIOD_MS - into;
  return remain === PERIOD_MS ? 0 : remain;
}

function tick(){
  const now = new Date();
  const diff = msToNextDrop(now.getTime());

  if(diff <= 0){
    timerEl.textContent = "OUT NOW";
    if(Math.random() < 0.25) hitGlitch(2.0);
    return;
  }

  const clean = formatCountdown(diff);
  const scrambleNow = Math.random() < 0.22;

  if(scrambleNow){
    const intensity = 0.28 + Math.random()*0.45;
    const scrambled = scrambleString(clean, intensity);
    timerEl.innerHTML = `<span class="ghost">${scrambled}</span>`;
    if(Math.random() < 0.35) hitGlitch(1.0);
    if(Math.random() < 0.40) glitchPop();
  }else{
    timerEl.textContent = clean;
  }

  if(Math.random() < 0.07){
    whisper.classList.add("on");
    setTimeout(()=>whisper.classList.remove("on"), 90);
  }
}

/* Start visuals immediately */
tick();
setInterval(tick, 250);
setInterval(()=>{
  if(Math.random() < 0.16) hitGlitch(1.2);
  if(Math.random() < 0.14) glitchPop();
}, 700);

/* Unlock audio on first user interaction (no gate) */
function unlockOnce(){
  if(audioOn) return;
  try{
    ensureAudio();
    ctx.resume?.();
    audioOn = true;
    hush.classList.remove("on");
    glitchSweep();
    hitGlitch(1.6);
  }catch(e){}
  window.removeEventListener("pointerdown", unlockOnce);
  window.removeEventListener("keydown", unlockOnce);
}
hush.classList.add("on");
setTimeout(()=>hush.classList.remove("on"), 2200);
window.addEventListener("pointerdown", unlockOnce, {passive:true});
window.addEventListener("keydown", unlockOnce);

/* Cursor trail */
let tx = window.innerWidth/2, ty = window.innerHeight/2;
document.addEventListener("pointermove", (e)=>{
  tx = e.clientX; ty = e.clientY;
  trail.style.left = tx + "px";
  trail.style.top  = ty + "px";
  trail.style.opacity = 0.9;
  clearTimeout(trail._t);
  trail._t = setTimeout(()=>trail.style.opacity = 0.0, 110);
}, {passive:true});

/* Bonus: type “VAULT” to enter */
let buf="";
document.addEventListener("keydown",(e)=>{
  const k = (e.key||"").toUpperCase();
  if(!/^[A-Z]$/.test(k)) return;
  buf = (buf + k).slice(-5);
  if(buf === "VAULT"){
    hitGlitch(2.6);
    glitchSweep();
    setTimeout(()=>{ window.location.href = "vault.html"; }, 160);
  }
});
</script>
</body>
</html>
