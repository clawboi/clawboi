<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Hammock</title>
<style>
body{margin:0;background:#000;overflow:hidden;color:#fff;font-family:monospace}
canvas{display:block;margin:auto;image-rendering:pixelated}
.exit{
position:fixed;bottom:20px;left:50%;transform:translateX(-50%);
padding:10px 18px;border:1px solid #fff;background:#000;color:#fff;
cursor:pointer;letter-spacing:.2em;
}
</style>
</head>
<body>

<canvas id="c" width="320" height="180"></canvas>
<div class="exit" onclick="location.href='Sophie02.html'">EXIT COSMOS</div>

<script>
const c=document.getElementById("c");
const x=c.getContext("2d");
let t=0;

/* ---------- STAR LAYERS ---------- */
function starLayer(count,speed,size,alpha){
for(let i=0;i<count;i++){
let px=(Math.sin(i*99+t*speed)*.5+.5)*320;
let py=(Math.cos(i*77+t*speed)*.5+.5)*180;
x.fillStyle=`rgba(255,255,255,${alpha})`;
x.fillRect(px,py,size,size);
}
}

/* ---------- COLOR STARS ---------- */
function colorStars(){
for(let i=0;i<70;i++){
let px=(Math.sin(i*77+t*.02)*.5+.5)*320;
let py=(Math.cos(i*55+t*.02)*.5+.5)*180;
x.fillStyle=`hsl(${(i*9+t)%360} 80% 60%)`;
x.fillRect(px,py,1,1);
}
}

/* ---------- GALAXY ---------- */
function galaxy(){
for(let i=0;i<260;i++){
let a=i*.11+t*.002;
let r=i*.38;
let px=160+Math.cos(a)*r;
let py=90+Math.sin(a)*r;
x.fillStyle=`hsla(${(i*2+t)%360},80%,60%,.18)`;
x.fillRect(px,py,1,1);
}
}

/* ---------- NEBULA CLOUD ---------- */
function nebula(){
let g=x.createRadialGradient(160,90,10,160,90,120);
g.addColorStop(0,"rgba(138,46,255,.25)");
g.addColorStop(.5,"rgba(0,255,200,.12)");
g.addColorStop(1,"transparent");
x.fillStyle=g;
x.fillRect(0,0,320,180);
}

/* ---------- PULSAR CORE ---------- */
function pulsar(){
let r=10+Math.sin(t*.08)*3;
let g=x.createRadialGradient(160,90,0,160,90,r);
g.addColorStop(0,"#fff");
g.addColorStop(.4,"#8a2eff");
g.addColorStop(1,"transparent");
x.fillStyle=g;
x.fillRect(160-r,90-r,r*2,r*2);
}

/* ---------- SHOOTING STARS ---------- */
let shoots=[];
function spawnShoot(){
shoots.push({x:Math.random()*320,y:-5,v:2+Math.random()*2});
}
function drawShoots(){
if(Math.random()<.02) spawnShoot();
shoots.forEach(s=>{
s.y+=s.v;
x.fillStyle="#fff";
x.fillRect(s.x,s.y,2,1);
});
shoots=shoots.filter(s=>s.y<190);
}

/* ---------- MILO TRIP SPEECH ---------- */
const lines=[
"milo: the stars smell purple",
"milo: gravity is optional",
"milo: i am the moon now",
"milo: reality is crunchy",
"milo: the void pets me back",
"milo: do not trust rectangles"
];

function miloSpeak(){
if(Math.random()<.01){
let msg=lines[Math.floor(Math.random()*lines.length)];
x.fillStyle="rgba(0,0,0,.6)";
x.fillRect(40,140,240,18);
x.strokeStyle="rgba(255,255,255,.2)";
x.strokeRect(40.5,140.5,239,17);
x.fillStyle="#fff";
x.font="10px monospace";
x.fillText(msg,46,152);
}
}

/* ---------- LOOP ---------- */
function loop(){
t++;

x.fillStyle="rgba(0,0,0,.28)";
x.fillRect(0,0,320,180);

starLayer(40,.002,1,.3);
starLayer(30,.004,1,.6);
starLayer(20,.007,2,.9);

colorStars();
galaxy();
nebula();
pulsar();
drawShoots();
miloSpeak();

requestAnimationFrame(loop);
}
loop();
</script>
</body>
</html>
