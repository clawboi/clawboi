<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
<title>CLAWBOI • UNIVERSE</title>

<style>
:root{
  --bg:#070707;
  --fg:#fff;
  --violet:#8a2eff;
  --sans:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  background:var(--bg);
  color:var(--fg);
  font-family:var(--sans);
  overflow:hidden;
}

/* soft full-page violet atmosphere */
body::before{
  content:"";
  position:fixed;
  inset:-25%;
  pointer-events:none;
  z-index:0;
  background:
    radial-gradient(circle at 18% 22%, rgba(138,46,255,.22), transparent 60%),
    radial-gradient(circle at 78% 30%, rgba(138,46,255,.18), transparent 65%),
    radial-gradient(circle at 50% 90%, rgba(138,46,255,.16), transparent 70%);
  mix-blend-mode:screen;
  filter:blur(14px) saturate(1.2);
}

/* CANVAS LAYERS */
#starsBack, #starsFront{
  position:fixed;
  inset:0;
  width:100%;
  height:100%;
  z-index:0;
  pointer-events:none;
}
#starsFront{opacity:.65; mix-blend-mode:screen}

/* HUD */
.top{
  position:fixed;
  top:0;left:0;right:0;
  z-index:9;
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:16px 18px;
  background:rgba(0,0,0,.28);
  backdrop-filter:blur(10px);
}

.brand{
  letter-spacing:.34em;
  text-transform:uppercase;
  font-size:12px;
  opacity:.92;
  user-select:none;
}
.brand a{color:#fff;text-decoration:none}

.hudRight{display:flex; gap:10px; align-items:center;}

.btn{
  border:0;
  cursor:pointer;
  padding:10px 14px;
  border-radius:999px;
  background:rgba(255,255,255,.06);
  color:#fff;
  letter-spacing:.22em;
  font-size:10px;
  text-transform:uppercase;
}
.btn:hover{filter:brightness(1.08)}

/* TITLE */
.centerUI{
  position:fixed;
  top:68px; left:0; right:0;
  z-index:7;
  text-align:center;
  pointer-events:none;
}
.title{
  margin:0;
  letter-spacing:.34em;
  text-transform:uppercase;
  font-size:clamp(18px,2.8vw,28px);
  text-shadow:0 0 14px rgba(138,46,255,.35), 0 0 90px rgba(138,46,255,.16);
  opacity:.95;
}
.sub{
  margin:12px auto 0;
  font-size:10px;
  letter-spacing:.28em;
  text-transform:uppercase;
  opacity:.55;
  max-width:72ch;
}

/* STAGE */
.stage{
  position:fixed;
  inset:0;
  z-index:5;
  overflow:hidden;
  touch-action:none; /* we handle dragging */
}

.map{
  position:absolute;
  left:50%;
  top:54%;
  transform:translate(-50%,-50%) translate(0px,0px);
  width:1400px;
  height:900px;
  transform-origin:center;
  will-change:transform;
}

/* nebula haze layer inside map */
.nebula{
  position:absolute;
  inset:-10%;
  pointer-events:none;
  background:
    radial-gradient(circle at 28% 35%, rgba(138,46,255,.12), transparent 58%),
    radial-gradient(circle at 74% 42%, rgba(255,255,255,.06), transparent 62%),
    radial-gradient(circle at 52% 72%, rgba(138,46,255,.10), transparent 60%),
    radial-gradient(circle at 48% 52%, rgba(0,0,0,.35), transparent 60%);
  filter:blur(18px);
  opacity:.65;
  mix-blend-mode:screen;
}

/* central core */
.core{
  position:absolute;
  left:50%;
  top:50%;
  width:22px;height:22px;
  transform:translate(-50%,-50%);
  border-radius:50%;
  background:radial-gradient(circle, rgba(255,255,255,.65), rgba(138,46,255,.38) 45%, rgba(0,0,0,0) 70%);
  box-shadow:0 0 24px rgba(138,46,255,.45), 0 0 150px rgba(138,46,255,.18);
  pointer-events:none;
}

/* orbit paths */
.orbit{
  position:absolute;
  left:50%;
  top:50%;
  border-radius:999px;
  border:1px solid rgba(255,255,255,.06);
  transform:translate(-50%,-50%);
  pointer-events:none;
}
.o1{width:360px;height:220px;opacity:.18}
.o2{width:560px;height:340px;opacity:.14}
.o3{width:760px;height:460px;opacity:.12}
.o4{width:980px;height:580px;opacity:.10}
.o5{width:1180px;height:700px;opacity:.08}

/* PLANETS (clickable) */
.planet{
  position:absolute;
  width:104px;height:104px;
  border-radius:50%;
  border:0;
  padding:0;
  cursor:pointer;
  background:transparent;
  color:#fff;
  -webkit-tap-highlight-color:transparent;
  user-select:none;
  touch-action:manipulation; /* encourages taps to register */
}
.planet::before{
  content:"";
  position:absolute;
  inset:0;
  border-radius:50%;
  transition:transform .22s ease, filter .22s ease, box-shadow .22s ease;
  box-shadow:
    0 0 18px rgba(255,255,255,.10),
    0 0 120px rgba(138,46,255,.12);
}
.planet::after{
  content:"";
  position:absolute;
  inset:-26px;
  border-radius:50%;
  background:radial-gradient(circle, rgba(138,46,255,.10), transparent 62%);
  opacity:0;
  transition:opacity .22s ease;
  pointer-events:none;
}
.planet span{
  position:absolute;
  bottom:-28px;
  left:50%;
  transform:translateX(-50%);
  font-size:10px;
  letter-spacing:.28em;
  text-transform:uppercase;
  opacity:.66;
  white-space:nowrap;
}
.planet:hover::before{
  transform:scale(1.035);
  filter:saturate(1.08);
  box-shadow:
    0 0 18px rgba(255,255,255,.16),
    0 0 170px rgba(138,46,255,.18);
}
.planet:hover::after{opacity:1}
.planet:active::before{transform:scale(.985)}

/* planet skins */
.earth::before{
  background:
    radial-gradient(circle at 30% 30%, rgba(255,255,255,.22), transparent 35%),
    radial-gradient(circle at 55% 60%, rgba(30,190,255,.46), rgba(0,80,140,.25) 45%, transparent 78%),
    radial-gradient(circle at 40% 55%, rgba(70,255,160,.28), transparent 55%),
    radial-gradient(circle at 50% 50%, rgba(138,46,255,.18), rgba(0,0,0,0) 75%);
}
.jupiter::before{
  background:
    radial-gradient(circle at 30% 30%, rgba(255,255,255,.18), transparent 35%),
    repeating-linear-gradient(12deg, rgba(255,170,90,.34), rgba(255,170,90,.34) 12px, rgba(130,70,30,.18) 12px, rgba(130,70,30,.18) 24px),
    radial-gradient(circle at 60% 70%, rgba(0,0,0,.40), transparent 58%);
}
.neptune::before{
  background:
    radial-gradient(circle at 30% 30%, rgba(255,255,255,.16), transparent 35%),
    radial-gradient(circle at 50% 55%, rgba(60,140,255,.50), rgba(10,40,120,.25) 55%, transparent 78%),
    radial-gradient(circle at 55% 40%, rgba(138,46,255,.18), transparent 62%);
}
.mars::before{
  background:
    radial-gradient(circle at 30% 30%, rgba(255,255,255,.14), transparent 35%),
    radial-gradient(circle at 55% 55%, rgba(255,70,70,.50), rgba(120,20,20,.25) 55%, transparent 78%),
    radial-gradient(circle at 70% 70%, rgba(0,0,0,.32), transparent 60%);
}
.saturn::before{
  background:
    radial-gradient(circle at 30% 30%, rgba(255,255,255,.16), transparent 35%),
    radial-gradient(circle at 50% 55%, rgba(235,210,150,.46), rgba(120,90,40,.18) 55%, transparent 78%),
    radial-gradient(circle at 60% 70%, rgba(0,0,0,.32), transparent 58%);
}
.saturn .ring{
  position:absolute;
  width:154px; height:36px;
  border-radius:999px;
  left:50%; top:52%;
  transform:translate(-50%,-50%) rotate(-14deg);
  background:linear-gradient(90deg, transparent, rgba(255,255,255,.18), rgba(138,46,255,.12), transparent);
  opacity:.88;
  pointer-events:none;
}

/* floating */
.float1{animation:f1 8.4s ease-in-out infinite}
.float2{animation:f2 7.8s ease-in-out infinite}
.float3{animation:f3 9.2s ease-in-out infinite}
.float4{animation:f4 6.9s ease-in-out infinite}
.float5{animation:f5 10.1s ease-in-out infinite}
@keyframes f1{50%{transform:translateY(-10px)}}
@keyframes f2{50%{transform:translateY(-12px)}}
@keyframes f3{50%{transform:translateY(-8px)}}
@keyframes f4{50%{transform:translateY(-11px)}}
@keyframes f5{50%{transform:translateY(-9px)}}

/* bottom hint */
.bottomHint{
  position:fixed;
  left:0; right:0; bottom:16px;
  z-index:7;
  text-align:center;
  pointer-events:none;
  font-size:10px;
  letter-spacing:.28em;
  text-transform:uppercase;
  opacity:.45;
}

@media (prefers-reduced-motion: reduce){
  .float1,.float2,.float3,.float4,.float5{animation:none!important}
}
</style>
</head>

<body>
<canvas id="starsBack"></canvas>
<canvas id="starsFront"></canvas>

<div class="top">
  <div class="brand"><a href="index.html">CLAWBOI</a></div>
  <div class="hudRight">
    <button class="btn" id="resetView">RESET VIEW</button>
    <a class="btn" href="index.html">HOME</a>
  </div>
</div>

<div class="centerUI">
  <h1 class="title">UNIVERSE</h1>
  <div class="sub">DRAG EMPTY SPACE • TAP A PLANET TO ENTER • EACH WORLD PLAYS A DIFFERENT TRACK</div>
</div>

<div class="stage" id="stage">
  <div class="map" id="map">
    <div class="nebula"></div>
    <div class="core"></div>

    <div class="orbit o1"></div>
    <div class="orbit o2"></div>
    <div class="orbit o3"></div>
    <div class="orbit o4"></div>
    <div class="orbit o5"></div>

    <!-- 5 planets -->
    <button class="planet earth float1" data-go="earth.html" style="left:18%; top:42%">
      <span>EARTH • ZAHH</span>
    </button>

    <button class="planet jupiter float2" data-go="jupiter.html" style="left:72%; top:32%">
      <span>JUPITER • BODY COUNT</span>
    </button>

    <button class="planet neptune float3" data-go="neptune.html" style="left:30%; top:72%">
      <span>NEPTUNE • N0 WATER</span>
    </button>

    <button class="planet mars float4" data-go="mars.html" style="left:78%; top:70%">
      <span>MARS • RANT</span>
    </button>

    <button class="planet saturn float5" data-go="saturn.html" style="left:50%; top:22%">
      <div class="ring" aria-hidden="true"></div>
      <span>SATURN • MANSION</span>
    </button>
  </div>
</div>

<div class="bottomHint">TIP: IF IT WON’T TAP, DON’T START DRAGGING ON THE PLANET</div>

<script>
/* --- Planet navigation (works on tap/click) --- */
document.querySelectorAll(".planet").forEach(p=>{
  p.addEventListener("click",(e)=>{
    e.stopPropagation();
    const go=p.getAttribute("data-go");
    if(go) window.location.href=go;
  }, {passive:true});
});

/* --- Drag pan ONLY when you drag empty space (not on a planet) --- */
const stage=document.getElementById("stage");
const map=document.getElementById("map");
const reset=document.getElementById("resetView");

let isDown=false;
let startX=0,startY=0;
let dx=0,dy=0;
let baseX=0,baseY=0;

function apply(){
  map.style.transform = `translate(-50%,-50%) translate(${dx}px,${dy}px)`;
}
function clampPan(){
  const maxX = 520;
  const maxY = 340;
  dx = Math.max(-maxX, Math.min(maxX, dx));
  dy = Math.max(-maxY, Math.min(maxY, dy));
}

/* IMPORTANT: if your pointerdown starts on a planet, do not start dragging */
stage.addEventListener("pointerdown",(e)=>{
  if(e.target.closest(".planet")) return;
  isDown=true;
  stage.setPointerCapture(e.pointerId);
  startX=e.clientX; startY=e.clientY;
  baseX=dx; baseY=dy;
});

stage.addEventListener("pointermove",(e)=>{
  if(!isDown) return;
  const mx = e.clientX - startX;
  const my = e.clientY - startY;
  dx = baseX + mx;
  dy = baseY + my;
  clampPan();
  apply();
});

stage.addEventListener("pointerup",()=>{isDown=false;});
stage.addEventListener("pointercancel",()=>{isDown=false;});

reset.addEventListener("click",()=>{
  dx=0; dy=0;
  apply();
});

/* =========================================================
   AMBIENT SPACE MUSIC (no file)
   - tries autoplay
   - if blocked, starts on first user tap anywhere
   - no “tap to unlock audio” text
========================================================= */
let aCtx, master, started=false;

function startAmbient(){
  if(started) return;
  started=true;

  aCtx = new (window.AudioContext || window.webkitAudioContext)();

  master = aCtx.createGain();
  master.gain.value = 0.16; // overall volume
  master.connect(aCtx.destination);

  // soft drone 1
  const o1 = aCtx.createOscillator();
  o1.type = "sine";
  o1.frequency.value = 55; // A1-ish

  const g1 = aCtx.createGain();
  g1.gain.value = 0.0;

  // soft drone 2
  const o2 = aCtx.createOscillator();
  o2.type = "triangle";
  o2.frequency.value = 82.41; // E2-ish

  const g2 = aCtx.createGain();
  g2.gain.value = 0.0;

  // noise bed
  const noiseBuf = aCtx.createBuffer(1, aCtx.sampleRate * 2, aCtx.sampleRate);
  const data = noiseBuf.getChannelData(0);
  for(let i=0;i<data.length;i++){
    // slightly pink-ish tilt
    data[i] = (Math.random()*2-1) * (1 - i/data.length) * 0.9;
  }
  const noise = aCtx.createBufferSource();
  noise.buffer = noiseBuf;
  noise.loop = true;

  const nGain = aCtx.createGain();
  nGain.gain.value = 0.02;

  const lp = aCtx.createBiquadFilter();
  lp.type = "lowpass";
  lp.frequency.value = 420;

  // slow shimmer (very subtle)
  const lfo = aCtx.createOscillator();
  lfo.type = "sine";
  lfo.frequency.value = 0.06;

  const lfoG = aCtx.createGain();
  lfoG.gain.value = 0.012; // modulation depth

  // space echo
  const delay = aCtx.createDelay();
  delay.delayTime.value = 0.42;

  const fb = aCtx.createGain();
  fb.gain.value = 0.32;

  const wet = aCtx.createGain();
  wet.gain.value = 0.28;

  const dry = aCtx.createGain();
  dry.gain.value = 0.82;

  // routing
  o1.connect(g1); o2.connect(g2);
  noise.connect(nGain);

  g1.connect(lp);
  g2.connect(lp);
  nGain.connect(lp);

  // split dry/wet
  lp.connect(dry);
  lp.connect(delay);
  delay.connect(fb);
  fb.connect(delay);
  delay.connect(wet);

  dry.connect(master);
  wet.connect(master);

  // LFO to gently move gains
  lfo.connect(lfoG);
  lfoG.connect(g1.gain);
  lfoG.connect(g2.gain);

  // fade in
  const t = aCtx.currentTime;
  g1.gain.setValueAtTime(0.0001, t);
  g1.gain.exponentialRampToValueAtTime(0.08, t + 2.4);

  g2.gain.setValueAtTime(0.0001, t);
  g2.gain.exponentialRampToValueAtTime(0.06, t + 2.8);

  // slight drift
  o1.frequency.setValueAtTime(55, t);
  o1.frequency.linearRampToValueAtTime(56.2, t + 24);

  o2.frequency.setValueAtTime(82.41, t);
  o2.frequency.linearRampToValueAtTime(81.9, t + 28);

  // start
  o1.start();
  o2.start();
  noise.start();
  lfo.start();

  // if suspended, attempt resume
  if(aCtx.state === "suspended"){
    aCtx.resume().catch(()=>{});
  }
}

// try autoplay immediately
try{
  startAmbient();
}catch(e){}

// if iOS blocked, first user interaction will start/resume silently
function unlockAudio(){
  try{
    if(!started) startAmbient();
    if(aCtx && aCtx.state === "suspended") aCtx.resume().catch(()=>{});
  }catch(e){}
  window.removeEventListener("pointerdown", unlockAudio, true);
  window.removeEventListener("touchstart", unlockAudio, true);
  window.removeEventListener("click", unlockAudio, true);
}
window.addEventListener("pointerdown", unlockAudio, true);
window.addEventListener("touchstart", unlockAudio, true);
window.addEventListener("click", unlockAudio, true);

/* --- Legendary cosmos: animated starfields (2 layers, parallax drift) --- */
function fitCanvas(c){
  const dpr = Math.max(1, window.devicePixelRatio || 1);
  c.width = Math.floor(innerWidth * dpr);
  c.height = Math.floor(innerHeight * dpr);
  c.style.width = innerWidth+"px";
  c.style.height = innerHeight+"px";
  return dpr;
}

const back = document.getElementById("starsBack");
const front = document.getElementById("starsFront");
const bctx = back.getContext("2d");
const fctx = front.getContext("2d");

let dprB = fitCanvas(back);
let dprF = fitCanvas(front);

function makeStars(count, w, h, big=false){
  const stars=[];
  for(let i=0;i<count;i++){
    stars.push({
      x: Math.random()*w,
      y: Math.random()*h,
      r: big ? (Math.random()*1.4 + .3) : (Math.random()*1.0 + .2),
      a: Math.random()*0.8 + 0.15,
      tw: Math.random()*0.9 + 0.1,
      sp: Math.random()*0.25 + (big?0.25:0.05)
    });
  }
  return stars;
}

let bw = back.width, bh = back.height;
let fw = front.width, fh = front.height;

let starsB = makeStars(220, bw, bh, false);
let starsF = makeStars(140, fw, fh, true);

/* =========================================================
   SHOOTING STARS (front layer)
========================================================= */
let meteors = [];
function spawnMeteor(w,h){
  // start near top/left edges, fly diagonally
  const fromLeft = Math.random() < 0.55;
  const x = fromLeft ? -Math.random()*w*0.2 : Math.random()*w;
  const y = -Math.random()*h*0.25;

  const speed = (Math.random()*1.1 + 1.4) * (window.devicePixelRatio || 1);
  const ang = (Math.random()*0.25 + 0.72); // radians-ish diagonal
  const vx = Math.cos(ang) * speed * 4.2;
  const vy = Math.sin(ang) * speed * 4.2;

  meteors.push({
    x,y,vx,vy,
    life: 0,
    ttl: Math.random()*26 + 28,
    len: Math.random()*160 + 140
  });
  if(meteors.length > 10) meteors.shift();
}

function drawMeteors(ctx, w, h){
  // occasional spawn
  if(Math.random() < 0.018) spawnMeteor(w,h);

  for(const m of meteors){
    m.x += m.vx;
    m.y += m.vy;
    m.life++;

    const p = m.life / m.ttl;
    const a = Math.max(0, Math.sin(Math.PI * p)) * 0.9;

    // tail direction opposite velocity
    const nx = -m.vx;
    const ny = -m.vy;
    const mag = Math.hypot(nx, ny) || 1;
    const tx = (nx/mag) * m.len;
    const ty = (ny/mag) * m.len;

    const grad = ctx.createLinearGradient(m.x, m.y, m.x + tx, m.y + ty);
    grad.addColorStop(0, `rgba(255,255,255,${a})`);
    grad.addColorStop(0.35, `rgba(138,46,255,${a*0.55})`);
    grad.addColorStop(1, "rgba(0,0,0,0)");

    ctx.strokeStyle = grad;
    ctx.lineWidth = 2.2;
    ctx.beginPath();
    ctx.moveTo(m.x, m.y);
    ctx.lineTo(m.x + tx, m.y + ty);
    ctx.stroke();

    // tiny head glow
    ctx.fillStyle = `rgba(255,255,255,${a})`;
    ctx.beginPath();
    ctx.arc(m.x, m.y, 1.8, 0, Math.PI*2);
    ctx.fill();
  }

  // cull dead / offscreen
  meteors = meteors.filter(m=>{
    if(m.life > m.ttl) return false;
    if(m.x > w*1.2 || m.y > h*1.2) return false;
    return true;
  });
}

let t=0;
function drawStars(ctx, stars, w, h, driftX, driftY, glow){
  ctx.clearRect(0,0,w,h);

  // faint galaxy smear
  const g = ctx.createRadialGradient(w*0.62, h*0.46, 0, w*0.62, h*0.46, Math.max(w,h)*0.6);
  g.addColorStop(0, "rgba(138,46,255,0.07)");
  g.addColorStop(0.35, "rgba(255,255,255,0.03)");
  g.addColorStop(1, "rgba(0,0,0,0)");
  ctx.fillStyle = g;
  ctx.fillRect(0,0,w,h);

  for(const s of stars){
    const tw = 0.55 + 0.45*Math.sin(t*s.tw + s.x*0.0008);
    const alpha = Math.min(1, s.a*tw);

    const x = (s.x + driftX + w) % w;
    const y = (s.y + driftY + h) % h;

    ctx.beginPath();
    ctx.fillStyle = `rgba(255,255,255,${alpha})`;
    ctx.arc(x, y, s.r, 0, Math.PI*2);
    ctx.fill();

    if(glow){
      ctx.beginPath();
      ctx.fillStyle = `rgba(138,46,255,${alpha*0.22})`;
      ctx.arc(x, y, s.r*2.3, 0, Math.PI*2);
      ctx.fill();
    }
  }
}

function loop(){
  t += 0.016;

  // parallax drift (subtle)
  const driftBX = Math.sin(t*0.06) * 30 * dprB;
  const driftBY = Math.cos(t*0.05) * 22 * dprB;

  const driftFX = Math.sin(t*0.09) * 50 * dprF;
  const driftFY = Math.cos(t*0.08) * 34 * dprF;

  drawStars(bctx, starsB, bw, bh, driftBX, driftBY, false);
  drawStars(fctx, starsF, fw, fh, driftFX, driftFY, true);

  // shooting stars on front layer
  drawMeteors(fctx, fw, fh);

  requestAnimationFrame(loop);
}
loop();

addEventListener("resize", ()=>{
  dprB = fitCanvas(back);
  dprF = fitCanvas(front);
  bw = back.width; bh = back.height;
  fw = front.width; fh = front.height;
  starsB = makeStars(220, bw, bh, false);
  starsF = makeStars(140, fw, fh, true);
  meteors = [];
});
</script>

</body>
</html>
