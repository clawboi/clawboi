<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <meta name="color-scheme" content="dark" />
  <meta name="theme-color" content="#000000" />
  <title>THE ADVENTURES OF CLAWBOI — Pixel RPG</title>

  <!-- FAST + CLEAN -->
  <meta name="description" content="A surreal dark-fantasy pixel RPG starring CLAWBOI. Survive the forest. Defeat demons. Bend reality." />
  <link rel="preconnect" href="." />

  <!-- YOU’LL BUILD THIS NEXT -->
  <link rel="stylesheet" href="style.css" />

  <!-- Optional: Favicons (add later) -->
  <!-- <link rel="icon" href="images/favicon.png" /> -->

  <!-- Preload: use your real paths once you add assets -->
  <!-- Example art/audio placeholders (safe if missing: browser just ignores) -->
  <link rel="preload" as="image" href="images/ui/logo.png" />
  <link rel="preload" as="audio" href="audio/forest-ambience.mp3" />
  <link rel="preload" as="audio" href="audio/slash.mp3" />
</head>

<body>
  <!-- TOP NAV (keeps your CLAWBOI universe consistent) -->
  <header class="topbar" aria-label="Clawboi Navigation">
    <a class="brand" href="index.html">CLAWBOI</a>
    <nav class="topnav">
      <a href="listen.html">LISTEN</a>
      <a href="index.html#visuals">VISUALS</a>
      <a href="shop.html">SHOP</a>
      <a href="follow.html">FOLLOW</a>
      <a class="ghost" href="mystery.html" title="Enter Mystery">MYSTERY</a>
    </nav>
  </header>

  <!-- GAME WRAPPER -->
  <main class="gameShell" id="gameShell">
    <!-- BACKDROP (for “real RPG vibe” behind canvas; style.css will paint this) -->
    <div class="backdrop" aria-hidden="true"></div>

    <!-- CANVAS LAYERING (world + fx + UI) -->
    <div class="stage" id="stage">
      <!-- world canvas -->
      <canvas id="game" width="320" height="180" aria-label="Game Canvas"></canvas>
      <!-- fx canvas (screen shake, glow bloom, hallucination filter overlays) -->
      <canvas id="fx" width="320" height="180" aria-hidden="true"></canvas>
      <!-- UI canvas (optional: if we want HUD pixel-perfect separate from DOM) -->
      <canvas id="ui" width="320" height="180" aria-hidden="true"></canvas>

      <!-- DOM HUD (fast to build, easy to skin) -->
      <div class="hud" id="hud" aria-live="polite">
        <div class="hudLeft">
          <div class="bar health">
            <span class="label">HP</span>
            <div class="fill" id="hpFill"></div>
            <div class="num" id="hpText">100/100</div>
          </div>

          <div class="bar xp">
            <span class="label">XP</span>
            <div class="fill" id="xpFill"></div>
            <div class="num" id="xpText">0/20</div>
          </div>

          <div class="meta">
            <span class="pill">LV <b id="levelText">1</b></span>
            <span class="pill">DMG <b id="dmgText">6</b></span>
            <span class="pill">SPD <b id="spdText">1.00</b></span>
          </div>
        </div>

        <div class="hudRight">
          <div class="hallucination">
            <div class="hallTop">
              <span class="pill violet">HALLUCINATION</span>
              <span class="pill" id="hallState">OFF</span>
            </div>
            <div class="bar hall">
              <div class="fill" id="hallFill"></div>
            </div>
          </div>

          <div class="inventory" id="inventory" aria-label="Inventory">
            <div class="slot" data-slot="0"></div>
            <div class="slot" data-slot="1"></div>
            <div class="slot" data-slot="2"></div>
            <div class="slot" data-slot="3"></div>
            <div class="slot" data-slot="4"></div>
          </div>
        </div>
      </div>

      <!-- CENTER PROMPTS (boss intro, “YOU DIED”, etc.) -->
      <div class="centerText" id="centerText" aria-live="assertive"></div>

      <!-- MOBILE CONTROLS (optional, toggled by main.js if touch device) -->
      <div class="touch" id="touch" aria-hidden="true">
        <div class="stick" id="stick">
          <button class="pad up" data-dir="up" aria-label="Move Up"></button>
          <button class="pad left" data-dir="left" aria-label="Move Left"></button>
          <button class="pad right" data-dir="right" aria-label="Move Right"></button>
          <button class="pad down" data-dir="down" aria-label="Move Down"></button>
        </div>

        <div class="actions">
          <button class="act" id="btnAttack" aria-label="Attack">ATTACK</button>
          <button class="act violet" id="btnDash" aria-label="Dash">DASH</button>
          <button class="act" id="btnUse" aria-label="Use Item">USE</button>
        </div>
      </div>

      <!-- DEBUG (toggle later) -->
      <div class="debug" id="debug" hidden></div>
    </div>

    <!-- START SCREEN OVERLAY -->
    <section class="overlay on" id="startScreen" aria-label="Start Screen">
      <div class="card">
        <div class="logo">
          <div class="logoTop">THE ADVENTURES OF</div>
          <div class="logoMain">CLAWBOI</div>
          <div class="logoSub">PIXEL RPG</div>
        </div>

        <div class="tagline">
          Survive the forest. Grow stronger. Defeat what’s watching you.
        </div>

        <div class="buttons">
          <button class="big" id="btnStart">START</button>
          <button class="big ghost" id="btnHow">HOW TO PLAY</button>
        </div>

        <div class="hint">
          <span class="key">WASD</span> move
          <span class="dot">•</span>
          <span class="key">J</span> attack
          <span class="dot">•</span>
          <span class="key">K</span> dash
          <span class="dot">•</span>
          <span class="key">I</span> inventory
          <span class="dot">•</span>
          <span class="key">ESC</span> pause
        </div>

        <div class="smallprint" id="audioHint">
          Tap START to enable sound on mobile.
        </div>
      </div>
    </section>

    <!-- HOW TO PLAY MODAL -->
    <section class="overlay" id="howScreen" aria-label="How To Play">
      <div class="card wide">
        <h2>HOW TO PLAY</h2>
        <ul>
          <li><b>Explore</b> the forest. The camera follows you.</li>
          <li><b>Collect</b> mushrooms, crystals, potions.</li>
          <li><b>Fight</b> demons with fast sword combat.</li>
          <li><b>Hallucination Mode</b> warps color, sound, and enemy forms.</li>
          <li><b>Bosses</b> appear with cinematic intros and phases.</li>
        </ul>
        <div class="buttons">
          <button class="big" id="btnBack">BACK</button>
        </div>
      </div>
    </section>

    <!-- PAUSE OVERLAY -->
    <section class="overlay" id="pauseScreen" aria-label="Paused">
      <div class="card">
        <div class="logoSub">PAUSED</div>
        <div class="buttons">
          <button class="big" id="btnResume">RESUME</button>
          <button class="big ghost" id="btnRestart">RESTART</button>
          <a class="big ghost link" href="index.html">EXIT</a>
        </div>
        <div class="hint">Press <span class="key">ESC</span> to resume.</div>
      </div>
    </section>

    <!-- DEATH OVERLAY -->
    <section class="overlay" id="deathScreen" aria-label="You Died">
      <div class="card">
        <div class="logoSub">YOU DIED</div>
        <div class="tagline">The forest swallowed the signal.</div>
        <div class="buttons">
          <button class="big" id="btnRetry">RETRY</button>
          <a class="big ghost link" href="index.html">EXIT</a>
        </div>
      </div>
    </section>

    <!-- LOADING STRIP -->
    <div class="loader" id="loader" aria-hidden="true">
      <div class="loaderBar"><div class="loaderFill" id="loaderFill"></div></div>
      <div class="loaderText" id="loaderText">Loading…</div>
    </div>
  </main>

  <!-- FOOTER -->
  <footer class="foot">
    <a href="secret.html" class="tiny">RETURN TO TRANSMISSION</a>
    <span class="tiny">•</span>
    <span class="tiny">v0.1</span>
  </footer>

  <!-- MODULES (order matters: utils/world before main) -->
  <script src="player.js" defer></script>
  <script src="world.js" defer></script>
  <script src="enemies.js" defer></script>
  <script src="effects.js" defer></script>
  <script src="ui.js" defer></script>
  <script src="main.js" defer></script>

  <!-- BOOTSTRAP: wires UI buttons to main.js hooks -->
  <script>
  (function(){
    const $ = (id)=>document.getElementById(id);

    const startScreen = $("startScreen");
    const howScreen   = $("howScreen");
    const pauseScreen = $("pauseScreen");
    const deathScreen = $("deathScreen");

    function show(el){ el.classList.add("on"); }
    function hide(el){ el.classList.remove("on"); }

    // Button wiring (main.js will define window.Game with methods)
    $("btnStart").addEventListener("click", ()=>{
      hide(howScreen);
      hide(startScreen);
      window.Game?.start?.(); // main.js should implement
    });

    $("btnHow").addEventListener("click", ()=>{
      hide(startScreen);
      show(howScreen);
    });

    $("btnBack").addEventListener("click", ()=>{
      hide(howScreen);
      show(startScreen);
    });

    $("btnResume").addEventListener("click", ()=>{
      hide(pauseScreen);
      window.Game?.resume?.();
    });

    $("btnRestart").addEventListener("click", ()=>{
      hide(pauseScreen);
      hide(deathScreen);
      hide(howScreen);
      hide(startScreen);
      window.Game?.restart?.();
    });

    $("btnRetry").addEventListener("click", ()=>{
      hide(deathScreen);
      window.Game?.restart?.();
    });

    // Expose overlay control hooks for main.js
    window.UIOverlays = {
      showPause(){ show(pauseScreen); },
      hidePause(){ hide(pauseScreen); },
      showDeath(){ show(deathScreen); },
      hideDeath(){ hide(deathScreen); },
      showStart(){ show(startScreen); },
      hideStart(){ hide(startScreen); },
      setCenterText(txt){
        const el = $("centerText");
        el.textContent = txt || "";
        el.style.opacity = txt ? "1" : "0";
      },
      setLoading(pct, txt){
        const loader = $("loader");
        const fill = $("loaderFill");
        const t = $("loaderText");
        if(pct == null){
          loader.classList.remove("on");
          return;
        }
        loader.classList.add("on");
        fill.style.width = Math.max(0, Math.min(100, pct)) + "%";
        t.textContent = txt || "Loading…";
      }
    };

    // ESC toggles pause (main.js will validate state)
    addEventListener("keydown",(e)=>{
      if(e.key === "Escape"){
        e.preventDefault();
        window.Game?.togglePause?.();
      }
    }, {passive:false});
  })();
  </script>
</body>
</html>
