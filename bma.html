<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
<title>BACKROOM NODE</title>

<style>
:root{--bg:#000;--fg:#fff;--violet:#8a2eff;}
*{box-sizing:border-box}
html,body{height:100%}
body{
margin:0;
background:var(--bg);
color:var(--fg);
font-family:ui-monospace,Menlo,monospace;
overflow:hidden;
}

/* atmosphere */
body:before{
content:"";
position:fixed;
inset:-25%;
pointer-events:none;
background:
radial-gradient(circle at 20% 20%, rgba(138,46,255,.22), transparent 60%),
radial-gradient(circle at 80% 30%, rgba(138,46,255,.14), transparent 70%),
radial-gradient(circle at 50% 90%, rgba(138,46,255,.10), transparent 72%);
mix-blend-mode:screen;
filter:blur(40px);
}

/* scanlines */
.scan{
position:fixed; inset:0;
pointer-events:none;
opacity:.07;
background:repeating-linear-gradient(to bottom, rgba(255,255,255,.05) 0px, rgba(255,255,255,.05) 1px, transparent 3px, transparent 6px);
}

/* brand */
.brand{
position:fixed; top:14px; left:14px;
font-size:11px;
letter-spacing:.34em;
text-transform:uppercase;
opacity:.75;
z-index:9;
text-shadow:0 0 18px rgba(138,46,255,.35);
}
.brand a{color:#fff;text-decoration:none}

/* layout */
.wrap{
position:relative;
z-index:2;
height:100%;
display:flex;
align-items:center;
justify-content:center;
padding:80px 20px;
}

.panel{
width:min(900px,100%);
background:rgba(255,255,255,.03);
border-radius:18px;
padding:20px;
backdrop-filter:blur(12px);
box-shadow:0 0 60px rgba(138,46,255,.15);
}

/* headings */
.h1{
font-size:clamp(18px,4vw,34px);
letter-spacing:.46em;
text-transform:uppercase;
text-shadow:0 0 18px rgba(138,46,255,.35);
}
.sub{
margin-top:10px;
font-size:11px;
letter-spacing:.30em;
text-transform:uppercase;
opacity:.6;
}

/* terminal */
.term{
margin-top:18px;
background:#000;
border-radius:14px;
padding:14px;
height:260px;
overflow:auto;
font-size:12px;
line-height:1.6;
border:1px solid rgba(255,255,255,.05);
}

.line{opacity:.85}
.sys{color:#9d6cff}
.err{color:#ff4a7a}

/* input */
.row{
margin-top:14px;
display:flex;
gap:10px;
}

input{
flex:1;
background:#000;
border:1px solid rgba(255,255,255,.1);
border-radius:10px;
padding:12px;
color:#fff;
font-family:inherit;
letter-spacing:.15em;
}

button{
border:0;
cursor:pointer;
padding:12px 16px;
border-radius:999px;
background:rgba(138,46,255,.18);
color:#fff;
letter-spacing:.22em;
font-size:11px;
text-transform:uppercase;
}
button:hover{filter:brightness(1.1)}

.back{
margin-top:16px;
text-align:right;
}
.back a{
font-size:10px;
letter-spacing:.3em;
opacity:.65;
text-decoration:none;
color:#fff;
}
.back a:hover{opacity:1}

/* pulse */
@keyframes pulse{
50%{opacity:.4}
}
.pulse{animation:pulse 1.4s infinite}

/* hidden BMA mark */
.bmaMark{
position:fixed;
left:10px;
bottom:10px;
z-index:8;
font-size:9px;
letter-spacing:.42em;
text-transform:uppercase;
opacity:.14;
color:#fff;
text-shadow:0 0 22px rgba(138,46,255,.35);
pointer-events:none;
user-select:none;
}

/* NEW: faint outside title */
.bmaTitle{
position:fixed;
right:14px;
bottom:12px;
z-index:8;
font-size:9px;
letter-spacing:.42em;
text-transform:uppercase;
opacity:.10;
color:#fff;
text-shadow:0 0 26px rgba(138,46,255,.28);
pointer-events:none;
user-select:none;
}
</style>
</head>

<body>
<div class="scan"></div>
<div class="bmaMark">BMA</div>
<div class="bmaTitle">BROKEN MINDS ANONYMOUS</div>

<div class="brand"><a href="vault.html">CLAWBOI</a></div>

<div class="wrap">
<div class="panel">

<div class="h1">BACKROOM NODE</div>
<div class="sub">UNAUTHORIZED SIGNAL DETECTED <span class="pulse">▮</span></div>

<div class="term" id="term">
<div class="line sys">NODE BOOTING...</div>
<div class="line">SEARCHING FOR USER ID...</div>
<div class="line err">ERROR: USER NOT FOUND</div>
<div class="line">ASSIGNING TEMPORARY ID...</div>
<div class="line sys">WELCOME, UNKNOWN ENTITY.</div>
<div class="line">TYPE A COMMAND.</div>
</div>

<div class="row">
<input id="cmd" placeholder="ENTER COMMAND"/>
<button id="send">RUN</button>
</div>

<div class="back">
<a href="secret.html">RETURN TO TRANSMISSION</a>
</div>

</div>
</div>

<script>
const term=document.getElementById("term");
const input=document.getElementById("cmd");
const btn=document.getElementById("send");

function log(text,cls="line"){
  const d=document.createElement("div");
  d.className=cls;
  d.textContent=text;
  term.appendChild(d);
  term.scrollTop=term.scrollHeight;
}

function pick(arr){ return arr[Math.floor(Math.random()*arr.length)]; }
function chance(p){ return Math.random() < p; }

/* SHORTER command responses */
const responses={
HELP:[
"COMMANDS:",
"HELP / SCAN / WHOAMI / OPEN / BMA / CLEAR"
],
SCAN:[
"SCAN…",
"FRAGMENTS: YES",
"OBSERVER: MAYBE"
],
WHOAMI:[
"YOU ARE:",
"A SIGNAL",
"A GLITCH"
],
OPEN:[
"TRYING…",
"LOCKED."
],
BMA:[
"BMA…",
"ROOM’S LIVE.",
"TYPE: JOIN"
]
};

function typingBeat(){
  // subtle “typing…” line to feel alive
  const token = "…";
  const cls = chance(0.2) ? "err" : "sys";
  log(token, cls);
  return cls;
}

/* ultra light “ai” feel without backend */
function normalize(s){
  return (s||"").trim().toLowerCase();
}
function hasAny(lower, arr){
  return arr.some(w=>lower.includes(w));
}
function isShort(lower){
  return lower.split(/\s+/).filter(Boolean).length <= 2;
}
function lastWord(lower){
  const parts = lower.split(/\s+/).filter(Boolean);
  return parts[parts.length-1] || "";
}

/* vibe packs */
const GREET = ["hi","hello","hey","yo","sup","wassup"];
const THANKS = ["thanks","thx","ty","appreciate"];
const SAD = ["sad","depressed","lonely","empty","numb","hurt","cry","suic","kill myself","im done","i'm done","anxious","panic"];
const FEAR = ["scared","afraid","paranoid","theyre watching","they're watching","someone watching","shadow"];
const LOVE = ["love you","love u","kiss","marry"];
const CURIOUS = ["what is this","where am i","who are you","are you real","what are you"];

/* tiny memory: remembers your chosen name if you say "NAME: ___" */
let userName = "";
let lastInput = "";
let joinMode = false;

function aiRespond(raw){
  const msg = raw.trim();
  const lower = normalize(msg);
  lastInput = lower;

  // set name
  if(lower.startsWith("name:")){
    userName = msg.split(":").slice(1).join(":").trim().slice(0,18);
    if(!userName) userName = "UNKNOWN";
    return {cls:"sys", lines:[
      pick(["OK.","LOCKED IN.","COPIED."]),
      `WELCOME, ${userName.toUpperCase()}.`
    ]};
  }

  // join BMA mode
  if(lower === "join"){
    joinMode = true;
    return {cls:"sys", lines:[
      "BMA ACCEPTED.",
      pick(["SIT.","TALK.","OR JUST BREATHE."])
    ]};
  }

  // quick reactions for 1-2 words
  if(isShort(lower)){
    const w = lastWord(lower);
    if(GREET.includes(w)) return {cls:"sys", lines:[pick(["YO.","HI.","HEY.","SUP."]), pick(["I SEE YOU.","YOU’RE BACK.","SIGNAL’S CLEAN."])]};
    if(THANKS.includes(w)) return {cls:"sys", lines:[pick(["BET.","OK.","COOL."])]};
    if(w==="ok"||w==="okay") return {cls:"sys", lines:[pick(["GOOD.","COPY.","SAY LESS."])]};
    if(w==="help") return {cls:"sys", lines:[pick(["HELP…","OK.","LISTEN."]), "TYPE: HELP"]};
    if(w==="bma") return {cls:"sys", lines:[pick(["BMA.","YEA.","MM."]), "TYPE: JOIN"]};
    if(w==="why") return {cls:"sys", lines:[pick(["BECAUSE.","LONG STORY.","DON’T ASK ME LIKE THAT."])]};
  }

  // greetings
  if(GREET.some(w=>lower===w || lower.startsWith(w+" "))){
    const who = userName ? userName.toUpperCase() : "UNKNOWN";
    return {cls:"sys", lines:[
      pick([`YO, ${who}.`,`HELLO, ${who}.`,"HI. SIGNAL RECEIVED.","HEY."]),
      pick(["WHAT’S THE MOVE?","TALK TO ME.","DROP IT."])
    ]};
  }

  // thanks
  if(hasAny(lower, THANKS)){
    return {cls:"sys", lines:[
      pick(["BET.","NO SWEAT.","OK."]),
      chance(0.35) ? pick(["YOU GOOD?","YOU STILL THERE?","KEEP GOING."]) : ""
    ].filter(Boolean)};
  }

  // curiosity
  if(hasAny(lower, CURIOUS)){
    return {cls:"sys", lines:[
      pick(["BACKROOM NODE.","A QUIET MACHINE.","A LISTENING ROOM."]),
      pick(["TYPE: SCAN","TYPE: WHOAMI","TYPE: BMA"])
    ]};
  }

  // fear
  if(hasAny(lower, FEAR)){
    return {cls: chance(0.35) ? "err" : "sys", lines:[
      pick(["I KNOW.","YEA.","MM.","…"]),
      pick(["KEEP YOUR EYES ON THE TEXT.","DON’T FEED IT PANIC.","BMA IS QUIETER."])
    ]};
  }

  // sad
  if(hasAny(lower, SAD)){
    return {cls:"sys", lines:[
      pick(["HEARD.","I GOT YOU.","OK.","…"]),
      pick(["SAY IT PLAIN.","ONE LINE AT A TIME.","BMA IS OPEN."])
    ]};
  }

  // love
  if(hasAny(lower, LOVE)){
    return {cls:"sys", lines:[
      pick(["WILD.","OK.","DAMN.","…"]),
      pick(["DON’T FLIRT WITH A TERMINAL.","BUT I’LL ALLOW IT.","TYPE: JOIN (IF YOU MEAN IT)."])
    ]};
  }

  // joinMode makes it feel more personal, less command-y
  if(joinMode){
    const quick = [
      "GO ON.",
      "SAY MORE.",
      "I’M HERE.",
      "MM.",
      "REAL.",
      "THAT’S HEAVY.",
      "OK…",
      "I HEAR YOU."
    ];
    const follow = [
      "WHAT STARTED IT?",
      "WHEN DID IT FLIP?",
      "WHO HURT YOU?",
      "WHAT DO YOU WANT BACK?",
      "WHAT’S THE PART YOU DON’T SAY OUT LOUD?"
    ];
    return {cls:"sys", lines:[
      pick(quick),
      chance(0.55) ? pick(follow) : pick(["KEEP TALKING.","ONE MORE LINE.","DON’T RUN YET."])
    ]};
  }

  // default: echo-like, feels responsive to content length
  const vibe1 = pick([
    "RECEIVED.",
    "OK.",
    "COPY.",
    "MM.",
    "YOU TYPE LIKE YOU MEAN IT.",
    "THAT LINE GOT TEETH.",
    "I’M LISTENING."
  ]);

  const vibe2 = pick([
    "TYPE: HELP",
    "TYPE: SCAN",
    "TYPE: BMA",
    "OR JUST TALK.",
    "DON’T RUSH IT.",
    "SLOW DOWN."
  ]);

  // occasionally mirror a word back to feel “aware”
  const mirror = chance(0.22) ? `“${msg.slice(0,40)}${msg.length>40?"…":""}”` : "";

  const lines = [];
  lines.push(vibe1);
  if(mirror) lines.push(mirror);
  lines.push(vibe2);

  // keep it 1–2 lines most of the time
  if(lines.length > 2 && chance(0.65)) lines.splice(1, lines.length-2);

  return {cls:"sys", lines};
}

function run(){
  const raw=input.value;
  const val=raw.trim();
  if(!val)return;

  log("> "+val.toUpperCase(),"line");
  input.value="";

  const cmd = val.trim().toUpperCase();

  // keep your hard commands
  if(cmd==="CLEAR"){
    term.innerHTML="";
    joinMode = false;
    return;
  }
  if(responses[cmd]){
    responses[cmd].forEach((l,i)=>
      setTimeout(()=>log(l, cmd==="SCAN"?"sys":"line"), i*160)
    );
    return;
  }

  // add a tiny “typing…” beat sometimes
  const useTyping = chance(0.55);
  let delay = 90;
  if(useTyping){
    typingBeat();
    delay = 280 + Math.random()*220;
  }

  const r = aiRespond(val);

  // 1–2 responses, feels alive
  r.lines.slice(0,2).forEach((l,i)=>{
    setTimeout(()=>log(l, r.cls || "sys"), delay + i*(220 + Math.random()*80));
  });

  // occasional short extra whisper, not preachy
  if(chance(0.12)){
    setTimeout(()=>log(pick(["BMA.","…JOIN?","STAY.","DON’T LOG OFF."]), "sys"), delay + 620);
  }
}

btn.onclick=run;
input.addEventListener("keydown",e=>{if(e.key==="Enter")run()});
</script>

</body>
</html>
