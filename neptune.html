<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
<title>NEPTUNE â€¢ N0-WATER</title>
<style>
:root{--bg:#070707;--violet:#8a2eff;--fg:#fff;--sans:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;}
*{box-sizing:border-box}
body{margin:0;background:var(--bg);color:var(--fg);font-family:var(--sans);min-height:100vh;overflow:hidden;position:relative}
a{color:#fff;text-decoration:none}
.top{position:fixed;top:0;left:0;right:0;display:flex;justify-content:space-between;align-items:center;padding:16px 18px;z-index:5;background:rgba(0,0,0,.25);backdrop-filter:blur(10px)}
.brand{letter-spacing:.34em;text-transform:uppercase;font-size:12px;opacity:.9}
.btn{border:0;cursor:pointer;padding:10px 14px;border-radius:999px;background:rgba(255,255,255,.06);color:#fff;letter-spacing:.22em;font-size:10px;text-transform:uppercase}
.wrap{max-width:920px;margin:0 auto;padding:90px 22px 80px;position:relative;z-index:2;text-align:center}

.bg{position:fixed;inset:0;z-index:0;pointer-events:none}
.bg::before{
  content:"";position:absolute;inset:-25%;
  background:
    radial-gradient(circle at 22% 25%, rgba(60,140,255,.18), transparent 60%),
    radial-gradient(circle at 72% 35%, rgba(10,40,120,.18), transparent 66%),
    radial-gradient(circle at 45% 90%, rgba(138,46,255,.10), transparent 70%);
  mix-blend-mode:screen;filter:blur(16px) saturate(1.15);
}
.waves{
  position:absolute;inset:0;opacity:.25;
  background:repeating-linear-gradient(
    to bottom,
    rgba(255,255,255,.02),
    rgba(255,255,255,.02) 2px,
    transparent 6px,
    transparent 14px
  );
  animation:roll 9s ease-in-out infinite;
}
@keyframes roll{50%{transform:translateY(-12px);opacity:.18}}

.fx{position:fixed;inset:0;z-index:1;pointer-events:none}
.scan{position:fixed;inset:0;pointer-events:none;z-index:2;opacity:.06;mix-blend-mode:overlay;
  background:repeating-linear-gradient(to bottom, rgba(255,255,255,.06) 0px, rgba(255,255,255,.06) 1px, transparent 3px, transparent 6px);
}

.planetWrap{position:relative;width:260px;height:260px;margin:12px auto 0;animation:float 9.6s ease-in-out infinite}
@keyframes float{50%{transform:translateY(-12px)}}

.planet{
  position:absolute;left:50%;top:50%;
  transform:translate(-50%,-50%);
  width:186px;height:186px;border-radius:50%;
  background:
    radial-gradient(circle at 30% 30%, rgba(255,255,255,.14), transparent 35%),
    radial-gradient(circle at 50% 55%, rgba(60,140,255,.48), rgba(10,40,120,.28) 55%, transparent 78%),
    radial-gradient(circle at 62% 40%, rgba(138,46,255,.18), transparent 62%),
    radial-gradient(circle at 65% 75%, rgba(0,0,0,.36), transparent 60%);
  box-shadow:0 0 26px rgba(60,140,255,.16),0 0 110px rgba(138,46,255,.10);
  will-change:transform,filter,box-shadow;
}

/* wave aura shimmer */
.aura{
  position:absolute;left:50%;top:50%;
  transform:translate(-50%,-50%);
  width:210px;height:210px;border-radius:50%;
  background:radial-gradient(circle at 50% 50%, rgba(255,255,255,.06), transparent 60%);
  opacity:.35;
  mix-blend-mode:screen;
  pointer-events:none;
  filter:blur(2px);
}

/* waveform halo */
.halo{
  position:absolute;left:50%;top:50%;
  transform:translate(-50%,-50%);
  width:260px;height:260px;border-radius:50%;
  pointer-events:none;
  opacity:.95;
  filter:drop-shadow(0 0 18px rgba(60,140,255,.14)) drop-shadow(0 0 38px rgba(138,46,255,.12));
}

h1{margin:22px 0 0;letter-spacing:.34em;text-transform:uppercase;font-size:clamp(22px,5vw,52px);
  text-shadow:0 0 16px rgba(60,140,255,.18),0 0 60px rgba(138,46,255,.18);}
.sub{margin:14px auto 0;font-size:10px;letter-spacing:.28em;text-transform:uppercase;opacity:.55;max-width:46ch}

.player{width:min(680px,100%);border-radius:22px;padding:18px;background:rgba(60,140,255,.06);
  cursor:pointer;position:relative;overflow:hidden;margin:34px auto 0;}
.player::before{content:"";position:absolute;top:0;left:-60%;width:50%;height:100%;
  background:linear-gradient(120deg,transparent,rgba(255,255,255,.35),transparent);transform:skewX(-20deg);}
.player:hover::before{animation:shine 1.2s linear}
@keyframes shine{to{left:130%}}
.hint{display:inline-flex;align-items:center;justify-content:center;padding:10px 14px;border-radius:999px;
  letter-spacing:.22em;font-size:10px;text-transform:uppercase;background:rgba(60,140,255,.10)}
.hint.rainbow{animation:rainbow 4s linear infinite;}
@keyframes rainbow{0%{color:#ff2a2a}25%{color:#ffe600}50%{color:#00ff9c}75%{color:#4aa3ff}100%{color:#ff2aff}}
.note{margin-top:14px;font-size:10px;letter-spacing:.22em;text-transform:uppercase;opacity:.55}
@media (prefers-reduced-motion: reduce){.waves,.planetWrap,.player::before{animation:none!important}}
</style>
</head>
<body>
<div class="bg"><div class="waves" id="waves"></div></div>
<canvas class="fx" id="fx"></canvas>
<div class="scan"></div>

<div class="top">
  <div class="brand"><a href="index.html">CLAWBOI</a></div>
  <div style="display:flex;gap:10px;align-items:center;">
    <a class="btn" href="universe.html">HOME TO COSMOS</a>
  </div>
</div>

<div class="wrap">
  <div class="planetWrap" aria-hidden="true">
    <canvas class="halo" id="halo" width="520" height="520"></canvas>
    <div class="planet" id="planet"></div>
    <div class="aura" id="aura"></div>
  </div>

  <h1>NEPTUNE</h1>
  <div class="sub">now playing: n0-water</div>

  <div class="player" id="player" role="button" aria-label="Play or pause n0-water">
    <div class="hint" id="hint">TAP TO PLAY</div>
    <div class="note">N0-WATER</div>
    <audio id="audio" playsinline preload="metadata">
      <source src="audio/n0-water.mp3?v=1" type="audio/mpeg">
    </audio>
  </div>
</div>

<script>
const player=document.getElementById("player");
const audio=document.getElementById("audio");
const hint=document.getElementById("hint");
const planet=document.getElementById("planet");
const aura=document.getElementById("aura");
const waves=document.getElementById("waves");

function setHint(on){hint.textContent=on?"PLAYING":"TAP TO PLAY";hint.classList.toggle("rainbow",on);}

let aCtx, analyser, srcNode, data, playing=false, amp=0;
function setupAudio(){
  if(aCtx) return;
  aCtx = new (window.AudioContext || window.webkitAudioContext)();
  analyser = aCtx.createAnalyser();
  analyser.fftSize = 1024;
  data = new Uint8Array(analyser.frequencyBinCount);
  srcNode = aCtx.createMediaElementSource(audio);
  const gain = aCtx.createGain();
  gain.gain.value = 0.95;
  srcNode.connect(analyser);
  analyser.connect(gain);
  gain.connect(aCtx.destination);
}
function getAmp(){
  if(!analyser || !playing) return amp*0.92;
  analyser.getByteFrequencyData(data);
  let sum=0;
  const start=2, end=Math.min(80, data.length);
  for(let i=start;i<end;i++) sum += data[i];
  const avg = (sum/(end-start))/255;
  amp = amp*0.82 + avg*0.18;
  return amp;
}

/* halo */
const halo=document.getElementById("halo");
const hctx=halo.getContext("2d");
function drawHalo(){
  const level=getAmp();
  const W=halo.width, H=halo.height;
  hctx.clearRect(0,0,W,H);
  const cx=W/2, cy=H/2;
  const baseR=178;
  const bars=92;

  for(let i=0;i<bars;i++){
    const t=i/bars*Math.PI*2;
    const idx = data ? Math.min(data.length-1, Math.floor(i*(data.length/bars))) : i;
    const raw = (analyser && data && playing) ? data[idx]/255 : 0;

    const r1 = baseR + raw*16 + level*26;
    const r2 = baseR + raw*40 + level*64;

    const x1 = cx + Math.cos(t)*r1;
    const y1 = cy + Math.sin(t)*r1;
    const x2 = cx + Math.cos(t)*r2;
    const y2 = cy + Math.sin(t)*r2;

    hctx.lineWidth = 2;
    hctx.strokeStyle = `rgba(60,140,255,${0.06 + raw*0.18 + level*0.10})`;
    hctx.beginPath(); hctx.moveTo(x1,y1); hctx.lineTo(x2,y2); hctx.stroke();

    hctx.lineWidth = 1;
    hctx.strokeStyle = `rgba(138,46,255,${0.05 + raw*0.14 + level*0.10})`;
    hctx.beginPath(); hctx.moveTo(x1,y1); hctx.lineTo(x2,y2); hctx.stroke();
  }
  requestAnimationFrame(drawHalo);
}
drawHalo();

/* planet react + background waves react */
function tick(){
  const level=getAmp();
  const s = 1 + level*0.08;
  planet.style.transform = `translate(-50%,-50%) scale(${s})`;
  planet.style.filter = `saturate(${1.05 + level*0.45}) contrast(${1.0 + level*0.18})`;
  planet.style.boxShadow = `0 0 ${26+level*26}px rgba(60,140,255,${0.16+level*0.16}),
                            0 0 ${110+level*140}px rgba(138,46,255,${0.10+level*0.16})`;
  aura.style.opacity = `${0.20 + level*0.55}`;
  aura.style.transform = `translate(-50%,-50%) scale(${1 + level*0.22})`;

  // waves speed/intensity
  waves.style.animationDuration = `${Math.max(4.8, 9 - level*4.5)}s`;
  waves.style.opacity = `${0.18 + level*0.22}`;

  requestAnimationFrame(tick);
}
tick();

/* flying stars: watery drift */
const fx=document.getElementById("fx");
const fctx=fx.getContext("2d");
let stars=[];
function resizeFX(){
  const dpr = Math.max(1, devicePixelRatio||1);
  fx.width = Math.floor(innerWidth*dpr);
  fx.height = Math.floor(innerHeight*dpr);
  fctx.setTransform(1,0,0,1,0,0);
  fctx.scale(dpr,dpr);
}
addEventListener("resize", resizeFX);
resizeFX();

function spawnStar(){
  const x = Math.random()*innerWidth;
  const y = innerHeight + 40;
  const sp = 0.6 + Math.random()*1.6;
  stars.push({
    x,y,
    vx: (Math.random()-.5)*0.6,
    vy: -sp,
    a: 0.10+Math.random()*0.28,
    r: 0.6+Math.random()*1.8,
    violet: Math.random()<0.25
  });
}
function drawFX(){
  const level=getAmp();
  fctx.clearRect(0,0,innerWidth,innerHeight);

  if(Math.random() < (0.18 + level*0.18)) spawnStar();

  for(let i=stars.length-1;i>=0;i--){
    const s=stars[i];
    const speed = 1 + level*1.6;
    s.x += s.vx*speed + Math.sin((performance.now()+i*1200)*0.001)*0.25;
    s.y += s.vy*speed;

    fctx.fillStyle = s.violet
      ? `rgba(138,46,255,${s.a + level*0.10})`
      : `rgba(255,255,255,${s.a + level*0.08})`;
    fctx.beginPath();
    fctx.arc(s.x, s.y, s.r + level*1.2, 0, Math.PI*2);
    fctx.fill();

    if(s.y < -60 || s.x < -80 || s.x > innerWidth+80) stars.splice(i,1);
  }

  requestAnimationFrame(drawFX);
}
drawFX();

/* play */
player.onclick=async()=>{
  try{
    setupAudio();
    if(aCtx.state==="suspended") await aCtx.resume();
    if(audio.paused){setHint(true);await audio.play(); playing=true;}
    else{audio.pause();audio.currentTime=0;setHint(false); playing=false;}
  }catch(e){setHint(false);alert("Check /audio/n0-water.mp3");}
};
audio.addEventListener("pause",()=>{setHint(false); playing=false;});
audio.addEventListener("play",()=>{setHint(true); playing=true;});

/* iOS unlock */
function unlockOnce(){
  try{ setupAudio(); aCtx.resume?.(); }catch(e){}
  removeEventListener("pointerdown", unlockOnce);
  removeEventListener("touchstart", unlockOnce);
  removeEventListener("keydown", unlockOnce);
}
addEventListener("pointerdown", unlockOnce, {passive:true});
addEventListener("touchstart", unlockOnce, {passive:true});
addEventListener("keydown", unlockOnce);
</script>
</body>
</html>
