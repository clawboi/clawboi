<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>ADVENTURES OF CLAWBOI</title>
<meta name="viewport" content="width=device-width,initial-scale=1">

<style>
html,body{
margin:0;
background:#000;
overflow:hidden;
font-family:monospace;
color:#fff;
}

/* ===== STARFIELD BACKGROUND ===== */
canvas{
position:fixed;
inset:0;
z-index:0;
}

/* ===== TOP NAV ===== */
.nav{
position:fixed;
top:12px;
left:14px;
z-index:10;
font-size:12px;
letter-spacing:.25em;
text-transform:uppercase;
display:flex;
gap:18px;
align-items:center;
user-select:none;
}
.nav a{
color:#fff;
text-decoration:none;
opacity:.72;
transition:.2s;
text-shadow:0 0 18px rgba(138,46,255,.22);
}
.nav a:hover{opacity:1}

/* ===== CENTER WRAP ===== */
.center{
position:absolute;
inset:0;
display:flex;
flex-direction:column;
align-items:center;
justify-content:center;
z-index:2;
pointer-events:none;
}

/* ===== TITLE CRAWL ===== */
.titleWrap{
perspective:900px;
height:240px;
overflow:hidden;
}

/* make it feel like it actually goes "into" the screen */
.title{
position:relative;            /* FIX: anchors ::after so it doesn’t “float” */
display:inline-block;         /* FIX: keeps the haze bound to the text box */
font-size:clamp(32px,6vw,86px);
letter-spacing:.25em;
text-align:center;
transform-origin:center bottom;
transform:rotateX(70deg) translateY(260px) translateZ(0px) scale(1.1);
opacity:0;
animation:
fadein 2.4s ease forwards,
crawl 14s linear forwards;
text-shadow:
0 0 10px #8a2eff,
0 0 40px #8a2eff,
0 0 80px #8a2eff;
will-change:transform,opacity,filter;
}

/* subtle atmospheric haze */
.title::after{
content:"";
position:absolute;
inset:-60px;
background:radial-gradient(circle at center, rgba(138,46,255,.12), transparent 55%);
filter:blur(26px);
z-index:-1;
opacity:.8;
}

@keyframes fadein{
to{opacity:1}
}

@keyframes crawl{
0%{transform:rotateX(70deg) translateY(280px) translateZ(0px) scale(1.18); filter:blur(0px)}
55%{filter:blur(.25px)}
100%{transform:rotateX(70deg) translateY(-680px) translateZ(-600px) scale(.55); filter:blur(.55px)}
}

/* ===== SUBTEXT ===== */
.subtitle{
margin-top:18px;
opacity:0;
letter-spacing:.4em;
font-size:12px;
animation:subfade 4s 7.2s forwards;
text-shadow:0 0 18px rgba(138,46,255,.25);
}

@keyframes subfade{
to{opacity:.72}
}

/* ===== BUTTON PANEL ===== */
.menu{
position:absolute;
bottom:80px;
display:flex;
gap:16px;
opacity:0;
animation:menuin 2s 10.5s forwards;
pointer-events:auto;
z-index:3;
}

@keyframes menuin{
to{opacity:1}
}

.btn{
padding:14px 22px;
border:1px solid rgba(255,255,255,.25);
background:rgba(138,46,255,.15);
color:#fff;
letter-spacing:.25em;
font-size:12px;
cursor:pointer;
transition:.25s;
}

.btn:hover{
background:#8a2eff;
box-shadow:0 0 20px #8a2eff;
transform:scale(1.05);
}

/* tiny audio toggle (kept but unused now) */
.smallBtn{
padding:14px 14px;
min-width:56px;
text-align:center;
}

.footer{
position:absolute;
bottom:14px;
font-size:10px;
opacity:.4;
letter-spacing:.3em;
z-index:3;
}

/* vignette */
body::after{
content:"";
position:fixed;
inset:0;
pointer-events:none;
background:radial-gradient(circle at center,
transparent 38%,
rgba(0,0,0,.78) 100%);
z-index:1;
}

/* subtle scan haze */
body::before{
content:"";
position:fixed;
inset:0;
pointer-events:none;
z-index:4;
opacity:.10;
mix-blend-mode:screen;
background:
repeating-linear-gradient(to bottom,
rgba(255,255,255,.06) 0px,
rgba(255,255,255,.06) 1px,
transparent 3px,
transparent 6px);
}
</style>
</head>
<body>

<div class="nav">
  <a href="../index.html">CLAWBOI</a>
  <a href="../games.html">BACK TO GAMES</a>
</div>

<canvas id="stars"></canvas>

<div class="center">

  <div class="titleWrap">
    <div class="title">ADVENTURES OF CLAWBOI</div>
  </div>

  <div class="subtitle">A COSMIC ROGUELIKE EXPERIENCE</div>

</div>

<div class="menu">
  <button class="btn" onclick="createSave()">CREATE GAME</button>
  <button class="btn" onclick="loadSave()">LOAD</button>
  <!-- REMOVED: audio stop/toggle button -->
</div>

<div class="footer">ENGINE BUILD 01</div>

<script>
/* ===============================
STARFIELD + FLYBYS + AUDIO
=============================== */
const canvas=document.getElementById("stars");
const ctx=canvas.getContext("2d");

function resize(){
  canvas.width=innerWidth;
  canvas.height=innerHeight;
}
resize();
onresize=resize;

/* ===== Stars (more + layered parallax) ===== */
const stars=[];
const STAR_COUNT = 1200; // more stars
for(let i=0;i<STAR_COUNT;i++){
  stars.push({
    x:Math.random()*canvas.width,
    y:Math.random()*canvas.height,
    z:Math.random()*3.2+0.15,   // depth/speed
    r:Math.random()*1.5+0.2,    // size
    tw:Math.random()*6.28       // twinkle phase
  });
}

/* ===== Nebula fog blobs ===== */
const fog=[];
for(let i=0;i<10;i++){
  fog.push({
    x:Math.random()*canvas.width,
    y:Math.random()*canvas.height,
    r:Math.random()*260+140,
    a:Math.random()*0.18+0.05,
    vx:(Math.random()-.5)*6,
    vy:(Math.random()-.5)*6
  });
}

/* ===== “Bad guys” flybys (simple pixel ships) ===== */
const ships=[];
function spawnShip(){
  const side=Math.floor(Math.random()*4);
  const w=canvas.width, h=canvas.height;
  let x,y,vx,vy;

  if(side===0){ x=-40; y=Math.random()*h; vx=Math.random()*240+220; vy=(Math.random()-.5)*60; }
  if(side===1){ x=w+40; y=Math.random()*h; vx=-(Math.random()*240+220); vy=(Math.random()-.5)*60; }
  if(side===2){ x=Math.random()*w; y=-40; vx=(Math.random()-.5)*60; vy=Math.random()*240+220; }
  if(side===3){ x=Math.random()*w; y=h+40; vx=(Math.random()-.5)*60; vy=-(Math.random()*240+220); }

  ships.push({
    x,y,vx,vy,
    life:Math.random()*1.1+1.0,
    t:0,
    col:(Math.random()<0.5?"#ff3b6b":"#00ffd5"),
    size:Math.random()*1.2+0.9,
    wob:Math.random()*6.28
  });
}
setInterval(()=>{
  if(ships.length<10 && Math.random()<0.8) spawnShip();
},600);

/* ===== Audio: synth pad + pulse (auto-start on first interaction) ===== */
let audioCtx=null, master=null, pad=null, pulse=null, noise=null;
let startedAudio=false;

function initAudio(){
  if(audioCtx) return;

  audioCtx = new (window.AudioContext || window.webkitAudioContext)();

  master = audioCtx.createGain();
  master.gain.value = 0.0;                 // start silent, fade in
  master.connect(audioCtx.destination);

  // pad
  pad = audioCtx.createOscillator();
  pad.type = "sawtooth";
  const padGain = audioCtx.createGain();
  padGain.gain.value = 0.03;
  pad.frequency.value = 55; // A1
  pad.connect(padGain).connect(master);

  // subtle pulse
  pulse = audioCtx.createOscillator();
  pulse.type = "sine";
  const pulseGain = audioCtx.createGain();
  pulseGain.gain.value = 0.0;
  pulse.frequency.value = 110;
  pulse.connect(pulseGain).connect(master);

  // noise shimmer
  const bufferSize = 2 * audioCtx.sampleRate;
  const noiseBuffer = audioCtx.createBuffer(1, bufferSize, audioCtx.sampleRate);
  const output = noiseBuffer.getChannelData(0);
  for (let i = 0; i < bufferSize; i++) output[i] = (Math.random() * 2 - 1) * 0.15;

  noise = audioCtx.createBufferSource();
  noise.buffer = noiseBuffer;
  noise.loop = true;

  const noiseFilter = audioCtx.createBiquadFilter();
  noiseFilter.type = "highpass";
  noiseFilter.frequency.value = 1200;

  const noiseGain = audioCtx.createGain();
  noiseGain.gain.value = 0.012;

  noise.connect(noiseFilter).connect(noiseGain).connect(master);

  pad.start();
  pulse.start();
  noise.start();

  // pulse rhythm
  let t = audioCtx.currentTime + 0.1;
  for(let i=0;i<256;i++){
    pulseGain.gain.setValueAtTime(0.0, t);
    pulseGain.gain.linearRampToValueAtTime(0.05, t+0.02);
    pulseGain.gain.linearRampToValueAtTime(0.0, t+0.18);
    t += 0.5;
  }
}

function startAudioOnce(){
  if(startedAudio) return;
  startedAudio = true;

  initAudio();
  if(audioCtx.state==="suspended") audioCtx.resume();

  master.gain.cancelScheduledValues(audioCtx.currentTime);
  master.gain.linearRampToValueAtTime(0.55, audioCtx.currentTime+0.6);
}

/* Autoplay rules: start on first user interaction */
window.addEventListener("pointerdown", startAudioOnce, { once:true });
window.addEventListener("keydown", startAudioOnce, { once:true });

/* ===== Draw helpers ===== */
function drawPixelShip(s){
  // tiny pixel craft (tri-ish)
  const x=s.x, y=s.y;
  ctx.save();
  ctx.translate(x,y);
  const ang=Math.atan2(s.vy,s.vx);
  ctx.rotate(ang);

  const sc=s.size;
  ctx.scale(sc, sc);

  // glow trail
  ctx.globalAlpha=0.18;
  ctx.fillStyle=s.col;
  ctx.fillRect(-18,-1,12,2);

  ctx.globalAlpha=1;
  // body
  ctx.fillStyle=s.col;
  ctx.fillRect(-6,-2,8,4);
  // nose
  ctx.fillStyle="#fff";
  ctx.globalAlpha=0.85;
  ctx.fillRect(2,-1,3,2);
  ctx.globalAlpha=1;

  // wings
  ctx.fillStyle="rgba(255,255,255,0.28)";
  ctx.fillRect(-4,-4,3,2);
  ctx.fillRect(-4,2,3,2);

  ctx.restore();
}

/* ===============================
RENDER LOOP
=============================== */
let lastT=performance.now();

function drawStars(){
  const now=performance.now();
  const dt=Math.min(0.05,(now-lastT)/1000);
  lastT=now;

  ctx.fillStyle="#000";
  ctx.fillRect(0,0,canvas.width,canvas.height);

  // fog drift
  for(const f of fog){
    f.x += f.vx*dt;
    f.y += f.vy*dt;
    if(f.x<-400) f.x=canvas.width+400;
    if(f.x>canvas.width+400) f.x=-400;
    if(f.y<-400) f.y=canvas.height+400;
    if(f.y>canvas.height+400) f.y=-400;

    const grad=ctx.createRadialGradient(f.x,f.y,10,f.x,f.y,f.r);
    grad.addColorStop(0,`rgba(138,46,255,${f.a})`);
    grad.addColorStop(1,"rgba(0,0,0,0)");
    ctx.fillStyle=grad;
    ctx.fillRect(f.x-f.r,f.y-f.r,f.r*2,f.r*2);
  }

  // stars parallax + twinkle
  for(const s of stars){
    s.y += (s.z*60)*dt;
    s.x += Math.sin((now/1000)+s.tw) * (s.z*2)*dt;

    if(s.y>canvas.height){
      s.y=0;
      s.x=Math.random()*canvas.width;
    }
    if(s.x<0) s.x=canvas.width;
    if(s.x>canvas.width) s.x=0;

    const tw = 0.35 + 0.65*(0.5+0.5*Math.sin((now/1000)*2 + s.tw));
    const a = Math.min(1,(s.z/3.2)) * tw;

    // violet tint + occasional white star
    const white = Math.random()<0.004;
    ctx.fillStyle = white ? `rgba(255,255,255,${a})` : `rgba(138,46,255,${a})`;
    ctx.fillRect(s.x,s.y,s.r,s.r);
  }

  // ships
  for(let i=ships.length-1;i>=0;i--){
    const s=ships[i];
    s.t += dt;
    s.life -= dt;
    s.x += s.vx*dt;
    s.y += s.vy*dt + Math.sin(s.t*6+s.wob)*18*dt;

    drawPixelShip(s);

    if(s.life<=0 || s.x<-120 || s.x>canvas.width+120 || s.y<-120 || s.y>canvas.height+120){
      ships.splice(i,1);
    }
  }

  requestAnimationFrame(drawStars);
}
drawStars();

/* ===============================
SAVE SYSTEM
=============================== */
function createSave(){
  let save={
    name:"CLAWBOI",
    level:1,
    hp:100,
    xp:0,
    gold:0,
    created:Date.now()
  };
  localStorage.setItem("AOC_SAVE",JSON.stringify(save));
  transition();
}

function loadSave(){
  if(localStorage.getItem("AOC_SAVE")){
    transition();
  }else{
    alert("NO SAVE FOUND");
  }
}

/* ===============================
TRANSITION
=============================== */
function transition(){
  let fade=document.createElement("div");
  fade.style.position="fixed";
  fade.style.inset="0";
  fade.style.background="#000";
  fade.style.zIndex="999";
  fade.style.opacity="0";
  fade.style.transition="1s";
  document.body.appendChild(fade);

  setTimeout(()=>fade.style.opacity=1,50);

  setTimeout(()=>{
    location.href="02AOC.html";
  },1100);
}
</script>
</body>
</html>
